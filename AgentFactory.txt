ã€ŠAgent Factory â€“ å®Œæ•´äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰v1.0ã€‹
æ–‡æ¡£ç›®æ ‡

æä¾›ä¸€ä¸ªä» 0 â†’ 1 æ­å»º ä¼ä¸šçº§ Agent è®­ç»ƒä¸éƒ¨ç½²å·¥å‚ çš„å®Œæ•´äº§å“è§„æ ¼ï¼Œä¾›å·¥ç¨‹å›¢é˜Ÿï¼ˆæˆ– Claude Opus 4.5ï¼‰ç›´æ¥ç”Ÿæˆä»£ç ä¸ç³»ç»Ÿã€‚

ğŸ“Œ ä¸€ã€äº§å“æ„¿æ™¯ï¼ˆVisionï¼‰

Agent Factory = ä¸€å¥—ç”Ÿäº§çº§çš„ Agent è®­ç»ƒã€è¯„ä¼°ã€éƒ¨ç½²å…¨é“¾è·¯å·¥å‚ã€‚

é¢å‘ä¸¤ç±»ç”¨æˆ·ï¼š

Agent ç ”å‘è€…ï¼ˆè®­ç»ƒã€å®éªŒã€ç®—æ³•ï¼‰

Agent ä¸šåŠ¡å›¢é˜Ÿï¼ˆè¿è¥ã€éƒ¨ç½²ã€å¯è§†åŒ–ã€ç›‘æ§ï¼‰

æœ€ç»ˆç›®æ ‡ï¼š

è®© Agent èƒ½è‡ªåŠ¨æ”¶é›†æ•°æ® â†’ è®­ç»ƒç­–ç•¥ â†’ è¯„ä¼° â†’ éƒ¨ç½² â†’ è¿è¡Œï¼Œå½¢æˆé—­ç¯ã€‚

æ”¯æŒ SFTã€RFTã€RLã€Tool-Use Agentsã€MCP Pluginsã€è‡ªåŠ¨è¯„ä¼°ã€å¯¹é½ã€å®‰å…¨å®¡è®¡ã€‚

å®Œå…¨å…·å¤‡å‰åç«¯åˆ†ç¦»ã€å¾®æœåŠ¡åŒ–ã€å¯æ‰©å±•ã€å¯è§‚å¯Ÿã€å®‰å…¨åˆè§„çš„ä¼ä¸šçº§èƒ½åŠ›ã€‚

ğŸ“Œ äºŒã€æ€»ä½“ç³»ç»Ÿæ¶æ„ï¼ˆSystem Architectureï¼‰

ç³»ç»Ÿç”± 6 ä¸ªå·¥å‚ç»„æˆï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Runtime Factory        â”‚
â”‚      (Agent Delivery & Serving)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Actions / Queries
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Reward/Eval Factory          â”‚
â”‚   (Reward Model + Verifier + Eval)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Scores / Labels
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Algorithm Factory            â”‚
â”‚   (SFT / RFT / PPO / DPO Training)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Rollouts / Datasets
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Environment Factory          â”‚
â”‚  (Scenarios / API / Sandbox / VM)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Trajectories / Logs
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Data Factory                 â”‚
â”‚(Events / Datasets / Label Platform) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Training Data
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Compute Factory â”‚
       â”‚ (GPU/CPU/Cost) â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Œ ä¸‰ã€æ ¸å¿ƒå­å·¥å‚ PRDï¼ˆé€ä¸ªè¯¦ç»†ï¼‰
1ï¸âƒ£ Data Factory â€“ æ•°æ®å·¥å‚ PRD
ğŸ“ 1.1 ç›®çš„

æ„å»ºä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®é‡‡é›†ã€æ¸…æ´—ã€æ ‡æ³¨ã€ç‰ˆæœ¬ç®¡ç†ä¸æ•°æ®é›†ç”Ÿæˆä¸­å¿ƒã€‚

ğŸ“ 1.2 è¾“å‡ºäº§ç‰©

Events / Trajectories

Human Feedbackï¼ˆåå¥½æ•°æ®ï¼‰

Reward Labels

SFT/RFT/ReplayBuffer-ready datasets

Data lineage & metadata

Labeling tasks + UI

ğŸ“ 1.3 åŠŸèƒ½éœ€æ±‚ï¼ˆFRï¼‰
FR1. äº‹ä»¶é‡‡é›†

APIï¼šPOST /events
æ”¯æŒå†…å®¹ï¼š

agent_action

environment_observation

tool_call

reward signals

metadata (session_id, env_id, ts)

FR2. æ•°æ®å¤„ç†

è¦æ±‚ï¼š

schema enforcement

è‡ªåŠ¨è„±æ• PII

å»é‡ã€è´¨é‡æ£€æŸ¥

FR3. æ ‡æ³¨ç³»ç»Ÿï¼ˆHuman-in-the-loopï¼‰

Pairwise ranking

Scalar Reward labeling

Tool-correctness labeling

æ‰¹é‡ä»»åŠ¡ç”Ÿæˆ

FR4. æ•°æ®é›†ç”Ÿæˆ

APIï¼š

POST /datasets/create
å‚æ•°ï¼š

filtersï¼ˆtags, timestamps, agent_versionï¼‰

output_format = parquet/jsonl

FR5. æ•°æ®è¡€ç¼˜ï¼ˆlineageï¼‰

è®°å½•ï¼š

æ¥è‡ªå“ªä¸ªç¯å¢ƒ run

æ¥è‡ªå“ªä¸ª agent version

å“ªä¸ª labeler å¤„ç†

æ•°æ®æ˜¯å¦è¢«è®­ç»ƒä½¿ç”¨

2ï¸âƒ£ Environment Factory â€“ ç¯å¢ƒå·¥å‚ PRD
ğŸ“ 2.1 ç›®çš„

åˆ›å»ºå¯å¤ç°ã€å¯å®‰å…¨éš”ç¦»çš„ç¯å¢ƒï¼ˆæµè§ˆå™¨ã€APIã€robot simulatorï¼‰ã€‚

ğŸ“ 2.2 è¾“å‡ºäº§ç‰©

Sandbox VM/Container runtime

Task scenario specs

Observation / Action schema

Step-by-step trajectories

Deterministic replay

ğŸ“ 2.3 åŠŸèƒ½éœ€æ±‚ï¼ˆFRï¼‰
FR1. åœºæ™¯ç®¡ç†

APIï¼šPOST /scenarios
å­—æ®µï¼š

name

type (browser/api/text/robot)

initial state

checker logicï¼ˆPython or YAMLï¼‰

FR2. ç¯å¢ƒæ‰§è¡Œ

APIï¼šPOST /runs
è¿”å› run_id
æ”¯æŒæ‰§è¡Œï¼š

step(action) â†’ observation

auto-termination

safe execution (timeouts, quotas)

FR3. æµè§ˆå™¨ç¯å¢ƒï¼ˆå¯é€‰ï¼‰

Playwright-based

DOM observation

Tool-calls interception

FR4. å›æ”¾èƒ½åŠ›

API:
GET /runs/{id}/trace

3ï¸âƒ£ Algorithm Factory â€“ ç®—æ³•å·¥å‚ PRD
ğŸ“ 3.1 ç›®çš„

å¯¹ Agent è¿›è¡Œè®­ç»ƒï¼Œæé«˜ç­–ç•¥è´¨é‡ã€‚

ğŸ“ 3.2 è¾“å‡ºäº§ç‰©

SFT æ¨¡å‹

RFT æ¨¡å‹

PPO / DPO / RLAIF æ¨¡å‹

Checkpoints

Experiment metadata

ğŸ“ 3.3 åŠŸèƒ½éœ€æ±‚ï¼ˆFRï¼‰
FR1. è®­ç»ƒä»»åŠ¡åˆ›å»º

APIï¼šPOST /train/jobs
å‚æ•°ï¼š

model_base

dataset_ref

algorithm (sft / rft / ppo / dpo)

hyperparams

compute_requirements

FR2. å®éªŒè¿½è¸ª

loss

KL

reward curve

eval metrics

compute cost

FR3. æ¨¡å‹ç®¡ç†

APIï¼š

GET /models/{id}

POST /models/{id}/promote

4ï¸âƒ£ Reward Factory â€“ å¥–åŠ±å·¥å‚ PRD
ğŸ“ 4.1 ç›®çš„

å®šä¹‰å¹¶è¯„ä¼°æ¯ä¸ªä»»åŠ¡çš„å¥½åæ ‡å‡†ï¼Œäº§å‡º reward signalã€‚

ğŸ“ 4.2 è¾“å‡ºäº§ç‰©

Reward Model

Verifiers

Eval reports

Safety & bias audit

ğŸ“ 4.3 åŠŸèƒ½éœ€æ±‚ï¼ˆFRï¼‰
FR1. Reward Model è®­ç»ƒ

è¾“å…¥ï¼špairwise preference æ•°æ®
è¾“å‡ºï¼šRM checkpoint

FR2. Auto-Eval

APIï¼šPOST /eval/run

Pass/Fail

Score

Safety Check

Task Metricï¼ˆsuccess rateï¼‰

FR3. Verifier

å®ç°ï¼š

rule-based checker

LLM judge checker

hybrid scoring

5ï¸âƒ£ Compute Factory â€“ è®¡ç®—å·¥å‚ PRD
ğŸ“ 5.1 ç›®çš„

è®­ç»ƒã€æ¨ç†ã€ç¯å¢ƒæ‰§è¡Œçš„ GPU/CPU ç»Ÿä¸€è°ƒåº¦ã€‚

ğŸ“ 5.2 è¾“å‡ºäº§ç‰©

Resource pool

Job scheduler

Autoscaler

Cost dashboard

ğŸ“ 5.3 åŠŸèƒ½éœ€æ±‚ï¼ˆFRï¼‰
FR1. èµ„æºç”³è¯·

APIï¼šPOST /compute/allocate
å­—æ®µï¼šgpu_type, count, duration, priority

FR2. Autoscaling

detect backlog

optimize cost

scale env workers / training nodes

FR3. èŠ‚ç‚¹ç›‘æ§

GPU util

CPU / Memory

Spot preemptions

6ï¸âƒ£ Runtime & Delivery Factory â€“ è¿è¡Œå·¥å‚ PRD
ğŸ“ 6.1 ç›®çš„

å°†è®­ç»ƒå¥½çš„æ¨¡å‹å˜æˆå¯ç”¨çš„ Agent æœåŠ¡ã€‚

ğŸ“ 6.2 è¾“å‡ºäº§ç‰©

Agent Runtime

Sessions

Agent Plugin Configs

Deployed versions

Monitoring dashboards

ğŸ“ 6.3 åŠŸèƒ½éœ€æ±‚ï¼ˆFRï¼‰
FR1. è°ƒç”¨ Agent

APIï¼š

POST /agents/{id}/sessions

POST /agents/{id}/sessions/{sid}/step

FR2. å·¥å…·ï¼ˆMCP Pluginsï¼‰ç®¡ç†

register plugin

permissions

scopes

versioning

FR3. ç›‘æ§

latency

error rate

tool success

memory

safety violations

ğŸ“Œ å››ã€ç³»ç»Ÿ API è¾¹ç•Œï¼ˆå¯¹ Claude å’Œå·¥ç¨‹å›¢é˜Ÿæœ€é‡è¦ï¼‰

ä»¥ä¸‹ä¸ºé¡¶å±‚ API Schemaï¼ˆæ¯ä¸ªå¾®æœåŠ¡å¯ä»¥ç”± Claude è‡ªåŠ¨ä»£ç ç”Ÿæˆï¼‰

ğŸ”¹ Data Factory
POST /events
GET /datasets/{id}
POST /datasets/create
POST /label-tasks

ğŸ”¹ Environment Factory
POST /scenarios
POST /runs
POST /runs/{id}/step
GET  /runs/{id}/trace

ğŸ”¹ Algorithm Factory
POST /train/jobs
GET  /train/jobs/{id}
POST /train/jobs/{id}/stop
GET  /models/{id}/checkpoints
POST /models/{id}/promote

ğŸ”¹ Reward Factory
POST /eval/run
GET  /eval/{id}/results
POST /rm/train
GET  /rm/models

ğŸ”¹ Compute Factory
POST /compute/allocate
GET  /compute/usage
POST /compute/scale

ğŸ”¹ Runtime Factory
POST /agents
POST /agents/{id}/sessions
POST /agents/{id}/sessions/{sid}/step
GET  /agents/{id}/sessions/{sid}/history

ğŸ“Œ äº”ã€å‰åç«¯åˆ†å·¥
å‰ç«¯ï¼ˆReact + Tailwind + Viteï¼‰

åœºæ™¯ç¼–æ’å™¨ï¼ˆScenario Builderï¼‰

Run å›æ”¾ Viewerï¼ˆStep trace visualizationï¼‰

æ•°æ®ä¸æ ‡æ³¨å¹³å°

è®­ç»ƒæ§åˆ¶å°

Reward/Eval Dashboard

Agent ç®¡ç†é¢æ¿ï¼ˆç‰ˆæœ¬ã€æ’ä»¶ã€ç›‘æ§ï¼‰

å¤šç§Ÿæˆ·ç®¡ç†ä¸æƒé™ç®¡ç† UI

åç«¯ï¼ˆå¾®æœåŠ¡ï¼‰

Microservicesï¼ˆå»ºè®® 12 ä¸ªï¼‰ï¼š

data-ingest

dataset-store

labeling-service

env-runner

browser-runner (optional)

agent-runtime

tool-gateway

train-orchestrator

rollout-worker

eval-engine

rm-trainer

compute-scheduler

model-registry

æ¶æ„ï¼šKafka + Kubernetes + S3 + vLLM

ğŸ“Œ å…­ã€éåŠŸèƒ½æ€§éœ€æ±‚ï¼ˆNFRï¼‰
åˆ†ç±»	è¦æ±‚
æ€§èƒ½	agent æ¨ç† < 1sï¼›ç¯å¢ƒ step < 300ms
å¯ç”¨æ€§	99.9% uptime
æ‰©å±•æ€§	æ¯åˆ†é’Ÿ > 10k events ingest
æ•°æ®å®‰å…¨	æ‰€æœ‰æ•°æ® PII è‡ªåŠ¨è„±æ•
å¯è§‚æµ‹	å®Œæ•´ logs + metrics + traces
å¤šç§Ÿæˆ·	Tenant éš”ç¦»ï¼ŒRBACï¼Œæƒé™åˆ†çº§
åˆè§„	GDPRã€æ•°æ®å¯åˆ é™¤ã€å®¡è®¡æ—¥å¿— 1 å¹´ä¿ç•™
ğŸ“Œ ä¸ƒã€MVP äº¤ä»˜æ¸…å•ï¼ˆå·¥ç¨‹å›¢é˜Ÿå¯ç›´æ¥æ‰§è¡Œï¼‰
4 å‘¨ç‰ˆæœ¬ï¼ˆæœ€å°å¯è¿è¡Œ Agent å·¥å‚ï¼‰
Week 1

Data Factoryï¼ˆevents ingest + dataset storeï¼‰

Environment Factoryï¼ˆåŸºæœ¬ scenario + runsï¼‰

Week 2

Algorithm Factoryï¼ˆSFT pipelineï¼‰

Compute Factoryï¼ˆæœ€å°è°ƒåº¦å™¨ï¼‰

Week 3

Runtime Factoryï¼ˆagent sessionï¼‰

å‰ç«¯ Dashboardï¼ˆruns + events explorerï¼‰

Week 4

Eval Factoryï¼ˆrule-based evaluatorï¼‰

MVP é›†æˆ + end-to-end pipeline

æœ€ç»ˆäº§ç‰©ï¼š
âœ”ï¸ ä¸€ä¸ªå¯è¿è¡Œçš„â€œè®­ç»ƒ â†’ ç¯å¢ƒ â†’ æ•°æ® â†’ éƒ¨ç½²â€é—­ç¯ã€‚

ğŸ“Œ å…«ã€éªŒæ”¶æ ‡å‡†ï¼ˆAcceptance Criteriaï¼‰

âœ“ å¯ä»¥åˆ›å»ºä¸€ä¸ª scenario

âœ“ agent èƒ½åœ¨ç¯å¢ƒä¸­æ‰§è¡Œä»»åŠ¡å¹¶äº§ç”Ÿ trajectory

âœ“ events è¢«å†™å…¥ Data Factory

âœ“ è®­ç»ƒä½œä¸šæˆåŠŸè¿è¡Œå¹¶ç”Ÿæˆ checkpoint

âœ“ Reward/Eval èƒ½ç»™å‡ºæˆåŠŸç‡

âœ“ agent èƒ½è¢«éƒ¨ç½²å¹¶è¢«ç”¨æˆ·è°ƒç”¨

âœ“ æ•´å¥—æµç¨‹å¯åœ¨ä¸€é”® E2E æµ‹è¯•ä¸­è·‘é€š

ğŸ“Œ ä¹ã€æœ¯è¯­è¡¨ Glossary

Trajectoryï¼šagent çš„ observation-action åºåˆ—

Scenarioï¼šç¯å¢ƒä»»åŠ¡å®šä¹‰

Runï¼šç¯å¢ƒçš„ä¸€æ¬¡æ‰§è¡Œ

RMï¼šReward Model

RFTï¼šReinforcement Fine-tuning

MCPï¼šModel Context Protocolï¼ˆæ’ä»¶å·¥å…·ï¼‰